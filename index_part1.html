<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Détectives Inc.</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=IBM+Plex+Mono:wght@400;500&family=Inter:wght@400;500&display=swap" rel="stylesheet"/>
<style>
:root {
  --bg:            #0a0a0a;
  --bg-raised:     #111111;
  --bg-card:       #141414;
  --bg-overlay:    rgba(10,10,10,0.92);
  --text-primary:  #e8e8e8;
  --text-secondary:#a0a0a0;
  --text-muted:    #686868;
  --border:        #2a2a2a;
  --border-active: #555555;
  --accent:        #c8b896;
  --accent-dim:    #6b5e3f;
  --danger:        #8b3a3a;
  --danger-dim:    #5a2525;
  --success:       #3a6b4a;
  --success-dim:   #2a4a35;
  --warn:          #7a6535;
  --warn-bright:   #c8a040;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent;}
html,body{height:100%;}
@media(min-width:601px){html,body{overflow:hidden;}}
body{background:var(--bg);color:var(--text-primary);font-family:'Inter',sans-serif;font-size:0.9rem;line-height:1.7;}
::-webkit-scrollbar{width:4px;height:4px;}
::-webkit-scrollbar-track{background:transparent;}
::-webkit-scrollbar-thumb{background:#2a2a2a;}

/* ── START SCREEN ── */
#start-screen{
  position:fixed;
  inset:0;
  background:var(--bg);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:32px;
  z-index:300;
  padding:24px;
}
#start-screen.hidden{display:none;}
.start-title{
  font-family:'Cormorant Garamond',serif;
  font-weight:300;
  font-size:4rem;
  letter-spacing:0.12em;
  color:var(--accent);
  text-align:center;
  line-height:1.2;
}
.start-subtitle{
  font-family:'IBM Plex Mono',monospace;
  font-size:0.75rem;
  letter-spacing:0.3em;
  text-transform:uppercase;
  color:var(--text-muted);
  text-align:center;
}
.start-desc{
  max-width:480px;
  text-align:center;
  color:var(--text-secondary);
  line-height:1.8;
  font-size:0.9rem;
}
.btn-start{
  font-family:'IBM Plex Mono',monospace;
  font-size:0.75rem;
  letter-spacing:0.25em;
  text-transform:uppercase;
  padding:16px 40px;
  background:transparent;
  cursor:pointer;
  transition:all 250ms ease;
  border:1px solid var(--accent-dim);
  color:var(--accent);
  margin-top:20px;
}
.btn-start:hover{
  background:rgba(200,184,150,0.1);
  border-color:var(--accent);
  transform:translateY(-2px);
}
@media(max-width:600px){
  .start-title{font-size:2.5rem;}
  .start-subtitle{font-size:0.65rem;}
  .start-desc{font-size:0.85rem;}
}

/* ── LAYOUT ── */
#game{display:grid;grid-template-rows:auto 1fr auto;height:100vh;max-width:960px;margin:0 auto;}
@media(max-width:600px){#game{height:auto;min-height:100vh;}}
#topbar{border-bottom:1px solid var(--border);padding:12px 24px;display:flex;justify-content:space-between;align-items:center;background:var(--bg-raised);}
#main{overflow-y:auto;padding:24px;}
#bottombar{border-top:1px solid var(--border);padding:12px 24px;background:var(--bg-raised);display:flex;justify-content:space-between;align-items:center;gap:12px;}

/* ── TYPOGRAPHY ── */
.t-title{font-family:'Cormorant Garamond',serif;font-weight:300;letter-spacing:0.08em;}
.t-heading{font-family:'Cormorant Garamond',serif;font-weight:400;letter-spacing:0.04em;}
.t-label{font-family:'IBM Plex Mono',monospace;font-size:0.6rem;letter-spacing:0.25em;text-transform:uppercase;color:var(--text-muted);}
.t-mono{font-family:'IBM Plex Mono',monospace;font-size:0.72rem;letter-spacing:0.1em;}

/* ── TOPBAR ── */
.agency-name{font-family:'Cormorant Garamond',serif;font-weight:300;font-size:1.3rem;letter-spacing:0.1em;color:var(--accent);}
.stat-row{display:flex;gap:24px;align-items:center;}
.stat{display:flex;flex-direction:column;align-items:center;gap:2px;}
.stat-val{font-family:'IBM Plex Mono',monospace;font-size:0.85rem;color:var(--text-primary);}
.stat-val.danger{color:var(--danger);}
.stat-val.warn{color:var(--warn-bright);}
.stat-val.good{color:var(--accent);}
.day-badge{font-family:'IBM Plex Mono',monospace;font-size:0.65rem;letter-spacing:0.2em;color:var(--text-muted);border:1px solid var(--border);padding:4px 10px;}

/* ── CARDS ── */
.card{background:var(--bg-card);border:1px solid var(--border);padding:20px;animation:fadeUp 300ms ease backwards;}
.card+.card{margin-top:8px;}
@keyframes fadeUp{from{opacity:0;transform:translateY(5px);}to{opacity:1;transform:translateY(0);}}

/* ── CRIME CARD ── */
.crime-card{border:1px solid var(--border);background:var(--bg-card);padding:16px 20px;cursor:pointer;transition:border-color 180ms ease;position:relative;animation:fadeUp 300ms ease backwards;}
.crime-card:hover{border-color:var(--border-active);}
.crime-card.selected{border-color:var(--accent-dim);background:#181510;}
.crime-card.assigned{border-color:var(--success);opacity:0.6;cursor:default;}
.crime-card.ignored{opacity:0.3;cursor:default;}
.crime-header{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:8px;gap:12px;padding-right:90px;}
.crime-title{font-family:'Cormorant Garamond',serif;font-weight:400;font-size:1.05rem;letter-spacing:0.03em;flex:1;}
.crime-reward{font-family:'IBM Plex Mono',monospace;font-size:0.68rem;color:var(--accent);letter-spacing:0.1em;white-space:nowrap;}
.crime-desc{color:var(--text-secondary);font-size:0.82rem;line-height:1.65;margin-bottom:12px;}
.crime-stats{display:flex;gap:12px;}
.stat-pip{display:flex;align-items:center;gap:6px;}
.pip-label{font-family:'IBM Plex Mono',monospace;font-size:0.58rem;letter-spacing:0.15em;text-transform:uppercase;color:var(--text-muted);}
.pips{display:flex;gap:2px;}
.pip{width:8px;height:8px;border:1px solid var(--border);}
.pip.on.action{background:#c8b896;}
.pip.on.reflexion{background:#7a9ab5;}
.pip.on.danger{background:#8b3a3a;}
.crime-tag{position:absolute;top:12px;right:12px;font-family:'IBM Plex Mono',monospace;font-size:0.55rem;letter-spacing:0.15em;text-transform:uppercase;padding:2px 7px;border:1px solid var(--border);color:var(--text-muted);}
.crime-tag.fantastique{border-color:var(--accent-dim);color:var(--accent-dim);}
.assigned-label{font-family:'IBM Plex Mono',monospace;font-size:0.6rem;letter-spacing:0.15em;text-transform:uppercase;color:var(--success);margin-top:8px;}

/* ── DETECTIVE CARD ── */
.detective-card{border:1px solid var(--border);background:var(--bg-card);padding:14px 18px;cursor:pointer;transition:border-color 180ms ease;animation:fadeUp 300ms ease backwards;}
.detective-card:hover:not(.unavailable){border-color:var(--border-active);}
.detective-card.selected{border-color:var(--accent-dim);background:#181510;}
.detective-card.unavailable{opacity:0.35;cursor:not-allowed;}
.detective-card.corrupt{border-color:var(--danger-dim);}
.det-header{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:6px;}
.det-name{font-family:'Cormorant Garamond',serif;font-weight:400;font-size:1rem;}
.det-age{font-family:'IBM Plex Mono',monospace;font-size:0.6rem;color:var(--text-muted);}
.det-traits{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap;}
.trait{font-family:'IBM Plex Mono',monospace;font-size:0.55rem;letter-spacing:0.12em;text-transform:uppercase;padding:2px 7px;border:1px solid var(--border);color:var(--text-muted);position:relative;cursor:help;}
.trait.corrupt{border-color:var(--danger-dim);color:var(--danger);}
.trait.sick{border-color:var(--warn);color:var(--warn-bright);}
.trait.positive{border-color:var(--accent-dim);color:var(--accent-dim);}
.trait:hover{border-color:var(--border-active);}
.det-status{font-family:'IBM Plex Mono',monospace;font-size:0.58rem;color:var(--text-muted);margin-top:6px;}
.det-status.unavail{color:var(--danger);}
.salary-label{font-family:'IBM Plex Mono',monospace;font-size:0.6rem;color:var(--text-muted);}

/* Tooltip */
.trait[data-tooltip]:hover::after{
  content:attr(data-tooltip);
  position:absolute;
  bottom:calc(100% + 8px);
  left:0;
  background:var(--bg-raised);
  border:1px solid var(--border-active);
  padding:8px 12px;
  font-size:0.7rem;
  white-space:nowrap;
  z-index:1000;
  pointer-events:none;
  letter-spacing:0.05em;
  text-transform:none;
  color:var(--text-secondary);
  box-shadow:0 4px 12px rgba(0,0,0,0.4);
}
.trait[data-tooltip]:hover::before{
  content:'';
  position:absolute;
  bottom:calc(100% + 2px);
  left:12px;
  border:6px solid transparent;
  border-top-color:var(--border-active);
  z-index:1000;
  pointer-events:none;
}

/* ── BONUS CARDS ── */
.bonus-card{border:1px solid var(--border);background:var(--bg-card);padding:14px 18px;cursor:pointer;transition:border-color 180ms ease;animation:fadeUp 300ms ease backwards;}
.bonus-card:hover:not(.used){border-color:var(--accent-dim);}
.bonus-card.selected{border-color:var(--accent);background:#181510;}
.bonus-card.used{opacity:0.3;cursor:default;}
.bonus-title{font-family:'Cormorant Garamond',serif;font-weight:400;font-size:0.95rem;margin-bottom:4px;}
.bonus-effect{font-size:0.78rem;color:var(--text-secondary);}
.bonus-neg{font-size:0.72rem;color:var(--danger);margin-top:4px;font-style:italic;}

/* ── BUTTONS ── */
.btn{font-family:'IBM Plex Mono',monospace;font-size:0.68rem;letter-spacing:0.2em;text-transform:uppercase;padding:11px 20px;background:transparent;cursor:pointer;transition:border-color 180ms ease,color 180ms ease,background 180ms ease;border:1px solid var(--border-active);color:var(--text-secondary);}
.btn:hover{border-color:var(--accent-dim);color:var(--accent);}
.btn:disabled{opacity:0.3;cursor:not-allowed;}
.btn.primary{border-color:var(--border-active);color:var(--text-secondary);}
.btn.danger{border-color:var(--danger-dim);color:var(--text-muted);}
.btn.danger:hover{border-color:var(--danger);color:var(--danger);background:rgba(139,58,58,0.06);}
.btn.small{padding:7px 14px;font-size:0.6rem;}
.btn.assign-cta{
  border:2px solid var(--accent);
  color:var(--accent);
  background:rgba(200,184,150,0.08);
  font-size:0.72rem;
  padding:14px 28px;
  font-weight:500;
  box-shadow:0 0 20px rgba(200,184,150,0.15);
}
.btn.assign-cta:hover{
  background:rgba(200,184,150,0.15);
  box-shadow:0 0 30px rgba(200,184,150,0.25);
  transform:translateY(-1px);
}

/* ── SECTIONS ── */
.section-title{font-family:'Cormorant Garamond',serif;font-weight:300;font-size:1.6rem;letter-spacing:0.06em;margin-bottom:4px;}
.section-label{font-family:'IBM Plex Mono',monospace;font-size:0.6rem;letter-spacing:0.25em;text-transform:uppercase;color:var(--text-muted);margin-bottom:16px;}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:8px;}
.grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;}
.divider{border:none;border-top:1px solid var(--border);margin:20px 0;}

/* ── PHASE HEADER ── */
.phase-header{margin-bottom:24px;}
.phase-title{font-family:'Cormorant Garamond',serif;font-weight:300;font-size:2rem;letter-spacing:0.06em;margin-bottom:4px;}
.phase-sub{color:var(--text-secondary);font-size:0.85rem;}

/* ── LOG ── */
#log{max-height:120px;overflow-y:auto;display:flex;flex-direction:column;gap:4px;padding-right:4px;}
.log-entry{font-size:0.78rem;color:var(--text-secondary);padding:4px 0;border-bottom:1px solid var(--border);font-family:'IBM Plex Mono',monospace;font-size:0.62rem;letter-spacing:0.05em;}
.log-entry.success{color:var(--accent);}
.log-entry.failure{color:var(--danger);}
.log-entry.event{color:var(--warn-bright);}
.log-entry.system{color:var(--text-muted);}

/* ── OVERLAY ── */
#overlay{position:fixed;inset:0;background:var(--bg-overlay);display:none;align-items:center;justify-content:center;z-index:100;padding:24px;}
#overlay.active{display:flex;}
.modal{background:var(--bg-card);border:1px solid var(--border);padding:32px;max-width:480px;width:100%;max-height:80vh;overflow-y:auto;animation:fadeUp 300ms ease;}
.modal-title{font-family:'Cormorant Garamond',serif;font-weight:300;font-size:1.8rem;letter-spacing:0.06em;margin-bottom:8px;}
.modal-label{font-family:'IBM Plex Mono',monospace;font-size:0.6rem;letter-spacing:0.25em;text-transform:uppercase;color:var(--text-muted);margin-bottom:20px;}
.modal-body{color:var(--text-secondary);font-size:0.875rem;line-height:1.8;margin-bottom:20px;}
.modal-result{padding:16px;border:1px solid var(--border);margin-bottom:20px;}
.modal-result.success{border-color:var(--success);}
.modal-result.failure{border-color:var(--danger);}
.result-label{font-family:'IBM Plex Mono',monospace;font-size:0.58rem;letter-spacing:0.2em;text-transform:uppercase;margin-bottom:6px;}
.result-label.success{color:var(--accent);}
.result-label.failure{color:var(--danger);}
.result-text{font-size:0.875rem;color:var(--text-secondary);font-style:italic;}

/* ── HIRE MODAL ── */
.hire-option{border:1px solid var(--border);padding:14px 18px;cursor:pointer;margin-bottom:8px;transition:border-color 180ms;}
.hire-option:hover{border-color:var(--accent-dim);}
.hire-option.selected{border-color:var(--accent-dim);background:#181510;}

/* ── REP BAR ── */
.rep-bar{height:3px;background:var(--border);margin-top:4px;width:80px;}
.rep-fill{height:100%;background:var(--accent-dim);transition:width 400ms ease;}

/* ── GAME OVER ── */
#gameover{display:none;position:fixed;inset:0;background:var(--bg);z-index:200;align-items:center;justify-content:center;flex-direction:column;gap:24px;padding:40px;}
#gameover.active{display:flex;}
.go-title{font-family:'Cormorant Garamond',serif;font-weight:300;font-size:4rem;letter-spacing:0.1em;color:var(--text-muted);}
.go-sub{font-family:'IBM Plex Mono',monospace;font-size:0.68rem;letter-spacing:0.25em;text-transform:uppercase;color:var(--text-muted);}
.go-stats{border:1px solid var(--border);padding:24px;max-width:340px;width:100%;}

/* ── PHASE: RESULTS ── */
.result-row{display:flex;justify-content:space-between;align-items:baseline;padding:12px 0;border-bottom:1px solid var(--border);}
.result-crime{font-family:'Cormorant Garamond',serif;font-size:0.95rem;}
.result-outcome{font-family:'IBM Plex Mono',monospace;font-size:0.6rem;letter-spacing:0.15em;text-transform:uppercase;}
.result-outcome.s{color:var(--accent);}
.result-outcome.f{color:var(--danger);}
.result-outcome.i{color:var(--text-muted);}
.result-money{font-family:'IBM Plex Mono',monospace;font-size:0.72rem;}
.result-money.pos{color:var(--accent);}
.result-money.neg{color:var(--danger);}

/* ── EVENT BANNER ── */
.event-banner{border:1px solid var(--warn);background:rgba(122,101,53,0.08);padding:14px 18px;margin-bottom:20px;}
.event-title{font-family:'Cormorant Garamond',serif;font-size:1.05rem;color:var(--warn-bright);margin-bottom:4px;}
.event-desc{font-size:0.82rem;color:var(--text-secondary);}

/* ── SCROLL ── */
#main{scrollbar-width:thin;scrollbar-color:#2a2a2a transparent;}

/* ── RESPONSIVE ── */
/* Tablette (< 768px) */
@media(max-width:768px){
  #game{max-width:100%;}
  .grid-2{grid-template-columns:1fr 1fr;}
  .grid-3{grid-template-columns:1fr 1fr;}
  #topbar{padding:10px 16px;}
  #main{padding:16px;}
  #bottombar{padding:10px 16px;}
}

/* Mobile (< 600px) — refonte complète */
@media(max-width:600px){
  /* Scroll natif — pas de layout fixe */
  html,body{height:auto;overflow:auto;}
  #game{
    display:flex;
    flex-direction:column;
    height:auto;
    min-height:100vh;
  }
  #main{
    overflow:visible;
    padding:14px;
    flex:1;
  }

  /* Topbar — nom + stats empilés */
  #topbar{
    flex-direction:column;
    align-items:flex-start;
    gap:10px;
    padding:12px 14px;
  }
  .agency-name{font-size:1.1rem;}
  .stat-row{
    width:100%;
    display:grid;
    grid-template-columns:1fr 1fr 1fr auto;
    gap:0;
    border:1px solid var(--border);
  }
  .stat{
    padding:8px 10px;
    border-right:1px solid var(--border);
    align-items:flex-start;
  }
  .stat:last-child{border-right:none;}
  .stat-val{font-size:0.8rem;}
  .day-badge{
    padding:8px 10px;
    border:none;
    align-self:center;
    font-size:0.58rem;
  }
  .rep-bar{width:48px;}

  /* Bottombar — log caché, boutons pleine largeur */
  #bottombar{
    flex-direction:column-reverse;
    align-items:stretch;
    gap:8px;
    padding:12px 14px;
    position:sticky;
    bottom:0;
    z-index:10;
    background:var(--bg-raised);
  }
  #log{
    max-height:60px;
    font-size:0.6rem;
    border-top:1px solid var(--border);
    padding-top:8px;
    flex:unset;
  }
  #bottombar > div:last-child{
    display:grid;
    grid-template-columns:1fr 1fr 2fr;
    gap:6px;
    width:100%;
  }
  #bottombar .btn{
    width:100%;
    max-width:none;
    padding:12px 8px;
    font-size:0.58rem;
    letter-spacing:0.12em;
    text-align:center;
  }

  /* Grilles */
  .grid-2,.grid-3{grid-template-columns:1fr;}

  /* Cards — padding réduit */
  .card{padding:14px;}
  .crime-card,.detective-card,.bonus-card,.hire-option{padding:12px 14px;}

  /* Phase header */
  .phase-title{font-size:1.5rem;}
  .phase-sub{font-size:0.8rem;}

  /* Crime stats — plus compact */
  .crime-stats{flex-wrap:wrap;gap:8px;}
  .pip{width:7px;height:7px;}
  
  /* Crime header — ajuster pour mobile */
  .crime-header{flex-direction:column;align-items:flex-start;gap:6px;padding-right:80px;}
  .crime-reward{margin-top:2px;}

  /* Modal */
  #overlay{padding:12px;}
  .modal{padding:20px;max-height:90vh;}
  .modal-title{font-size:1.4rem;}

  /* Section label */
  .section-label{font-size:0.55rem;}

  /* Buttons */
  .btn{font-size:0.62rem;padding:10px 16px;}
  .btn.small{padding:9px 12px;font-size:0.58rem;}

  /* Result rows */
  .result-row{flex-wrap:wrap;gap:4px;}
  .result-crime{font-size:0.85rem;}
  .result-outcome,.result-money{font-size:0.58rem;}

  /* Det card traits */
  .det-traits{gap:4px;}
  .trait{font-size:0.5rem;padding:2px 5px;}

  /* Event banner */
  .event-banner{padding:12px 14px;}
  .event-title{font-size:0.95rem;}
}

/* Très petits écrans (< 380px) */
@media(max-width:380px){
  .agency-name{font-size:1rem;}
  .stat-val{font-size:0.72rem;}
  #bottombar > div:last-child{
    grid-template-columns:1fr 1fr;
    grid-template-rows:auto auto;
  }
  #btn-action{
    grid-column:1/-1;
  }
  .phase-title{font-size:1.3rem;}
  .crime-title{font-size:0.95rem;}
  .det-name{font-size:0.9rem;}
}
</style>
</head>
<body>

<!-- START SCREEN -->
<div id="start-screen">
  <div class="start-title">Détectives Inc.</div>
  <div class="start-subtitle">Agence d'Enquêtes Privées</div>
  <div class="start-desc">
    Paris, années 1920. Dirigez votre agence de détectives, résolvez des affaires mystérieuses, 
    gérez vos enquêteurs et maintenez votre réputation dans une ville où réalité et fantastique se mêlent.
  </div>
  <button class="btn-start" onclick="startGame()">Commencer à Jouer</button>
  <div style="margin-top:24px;">
    <a href="https://maisonparadoxe.github.io/" target="_blank" rel="noopener"
       style="font-family:'IBM Plex Mono',monospace;font-size:0.55rem;letter-spacing:0.2em;text-transform:uppercase;color:var(--text-muted);text-decoration:none;border-bottom:1px solid var(--border);padding-bottom:1px;transition:color 200ms ease,border-color 200ms ease;"
       onmouseover="this.style.color='var(--accent)';this.style.borderColor='var(--accent-dim)'"
       onmouseout="this.style.color='var(--text-muted)';this.style.borderColor='var(--border)'">
      Maison Paradoxe ↗
    </a>
  </div>
</div>

<div id="game">
  <div id="topbar">
    <div style="display:flex;flex-direction:column;gap:3px;">
      <span class="agency-name">Détectives Inc.</span>
      <a href="https://maisonparadoxe.github.io/" target="_blank" rel="noopener"
         style="font-family:'IBM Plex Mono',monospace;font-size:0.55rem;letter-spacing:0.2em;text-transform:uppercase;color:var(--text-muted);text-decoration:none;border-bottom:1px solid var(--border);padding-bottom:1px;transition:color 200ms ease,border-color 200ms ease;"
         onmouseover="this.style.color='var(--accent)';this.style.borderColor='var(--accent-dim)'"
         onmouseout="this.style.color='var(--text-muted)';this.style.borderColor='var(--border)'">
        Maison Paradoxe ↗
      </a>
    </div>
    <div class="stat-row">
      <div class="stat">
        <span class="t-label">Argent</span>
        <span class="stat-val good" id="ui-money">—</span>
      </div>
      <div class="stat">
        <span class="t-label">Réputation</span>
        <div>
          <span class="stat-val" id="ui-rep">—</span>
          <div class="rep-bar"><div class="rep-fill" id="ui-rep-bar" style="width:50%"></div></div>
        </div>
      </div>
      <div class="stat">
        <span class="t-label">Disponibles</span>
        <span class="stat-val" id="ui-dets">—</span>
      </div>
      <span class="day-badge" id="ui-day">Jour —</span>
    </div>
  </div>

  <div id="main"></div>

  <div id="bottombar">
    <div id="log" style="flex:1;"></div>
    <div style="display:flex;gap:8px;flex-shrink:0;">
      <button class="btn small" onclick="openRulesModal()">? Règles</button>
      <button class="btn small" id="btn-hire" onclick="openHireModal()">+ Recruter</button>
      <button class="btn primary" id="btn-action">—</button>
    </div>
  </div>
</div>

<!-- OVERLAY -->
<div id="overlay">
  <div class="modal" id="modal-content"></div>
</div>

<!-- GAME OVER -->
<div id="gameover" id="gameover">
  <div class="go-title">Dossier Fermé</div>
  <div class="go-sub" id="go-reason">L'agence a fermé ses portes.</div>
  <div class="go-stats card" id="go-stats"></div>
  <button class="btn primary" onclick="initGame()">Nouvelle Agence</button>
</div>

<script>
/* ══════════════════════════════════════════════
   START SCREEN
══════════════════════════════════════════════ */
function startGame() {
  document.getElementById('start-screen').classList.add('hidden');
  initGame();
}

/* ══════════════════════════════════════════════
   DONNÉES
══════════════════════════════════════════════ */
const ALL_CRIMES = [
  { id:1, titre:"Vol du Diamant Bleu", type:"action", desc:"Un diamant d'exception a disparu d'un hôtel du IIIe arrondissement. Le directeur veut discrétion absolue.", action:4, reflexion:1, danger:2, recompense:300, temps:1, tag:"Réaliste", histoire:"La chambre forte était déverrouillée de l'intérieur. Le personnel de nuit se contredit.", fins:{succes:"Le diamant est retrouvé dans la doublure du manteau du groom. L'affaire est réglée sans bruit.",echec:"Le diamant disparaît dans les bas-fonds. Votre réputation en prend un coup."}},
  { id:2, titre:"Meurtre à l'Opéra", type:"reflexion", desc:"Le baryton principal a été retrouvé mort dans sa loge. Plusieurs suspects, aucun mobile apparent.", action:1, reflexion:5, danger:2, recompense:500, temps:1, tag:"Réaliste", histoire:"Une lettre anonyme avait averti la victime trois jours avant. Personne ne l'avait prise au sérieux.", fins:{succes:"La femme du baryton est confondue. La presse salue votre perspicacité.",echec:"Le meurtrier s'échappe. La ville bruisse de vos échecs."}},
  { id:3, titre:"Chantage Politique", type:"danger", desc:"Un sénateur reçoit des menaces. Il refuse de contacter la police. Affaire ultra-sensible.", action:2, reflexion:3, danger:4, recompense:450, temps:1, tag:"Réaliste", histoire:"Les lettres de chantage contiennent des informations que seul l'entourage immédiat pouvait connaître.", fins:{succes:"Le maître chanteur est neutralisé. Le sénateur vous envoie une enveloppe non tracée.",echec:"Le scandale éclate. Le sénateur vous accuse publiquement de négligence."}},
  { id:4, titre:"Disparition du Journaliste", type:"reflexion", desc:"Un reporter enquêtant sur des trafics portuaires a disparu. Sa rédaction préfère la discrétion.", action:2, reflexion:4, danger:3, recompense:400, temps:1, tag:"Réaliste", histoire:"Son dernier article mentionnait une connexion entre le port et une famille noble. Ses notes ont été volées.", fins:{succes:"Le journaliste est retrouvé vivant dans un entrepôt du 12e. L'histoire fait la une.",echec:"Aucune trace. La rédaction coupe tout contact avec votre agence."}},
  { id:5, titre:"L'Héritière Fantôme", type:"action", desc:"Une jeune héritière prétend voir sa défunte mère dans les couloirs de son manoir. La famille veut des réponses.", action:3, reflexion:2, danger:1, recompense:250, temps:1, tag:"Réaliste", histoire:"Des objets bougent la nuit. La cuisinière a démissionné sans explication.", fins:{succes:"Il s'agissait d'un cousin cupide qui simulait les apparitions pour terroriser l'héritière.",echec:"L'héritière quitte le manoir. Le mystère demeure entier."}},
  { id:6, titre:"Le Pacte du Peintre Maudit", type:"danger", desc:"Un peintre célèbre prétend avoir signé un contrat avec une entité. Ses toiles montrent des scènes non encore advenues.", action:1, reflexion:3, danger:5, recompense:600, temps:1, tag:"Fantastique", histoire:"Trois scènes peintes se sont réalisées à l'identique. La quatrième toile représente votre agence en flammes.", fins:{succes:"La manipulation est déjouée. Le peintre était instrumentalisé par un réseau occulte.",echec:"La quatrième toile se réalise. Vous perdez du matériel et un enquêteur est hospitalisé."}},
  { id:7, titre:"La Malédiction de la Montre", type:"reflexion", desc:"Trois propriétaires successifs de la même montre de gousset sont morts dans des circonstances identiques.", action:1, reflexion:5, danger:3, recompense:550, temps:1, tag:"Fantastique", histoire:"La montre indique toujours 3h17, quelle que soit l'heure. Le dernier propriétaire est mort à 3h17.", fins:{succes:"La montre dissimulait un mécanisme libérant un poison de contact. Affaire résolue.",echec:"La malédiction continue. Votre enquêteur présente des symptômes inexpliqués."}},
  { id:8, titre:"Le Cabaret des Ombres", type:"action", desc:"Des clients du cabaret Théodore signalent des heures perdues. Aucun souvenir entre minuit et l'aube.", action:4, reflexion:2, danger:3, recompense:380, temps:1, tag:"Fantastique", histoire:"Les employés du cabaret ne présentent aucune anomalie. Seuls les clients sont affectés.", fins:{succes:"Une substance hallucinogène était diffusée via la ventilation. Le gérant arrêté.",echec:"L'enquêteur perd lui aussi plusieurs heures. L'affaire reste ouverte."}},
  { id:9, titre:"Vol dans les Archives", type:"reflexion", desc:"Des dossiers sensibles ont disparu de la préfecture. Pas d'effraction visible.", action:1, reflexion:4, danger:2, recompense:350, temps:1, tag:"Réaliste", histoire:"Les archives concernaient des affaires classées liées à une famille d'industriels.", fins:{succes:"Un fonctionnaire corrompu est confondu. La préfecture vous recommande discrètement.",echec:"Les dossiers ne réapparaissent pas. L'affaire est étouffée."}},
  { id:10, titre:"L'Enfant des Catacombes", type:"danger", desc:"Un enfant prétend venir des catacombes et ne parle qu'en ancien français. Il connaît des détails sur des meurtres non élucidés.", action:2, reflexion:4, danger:4, recompense:500, temps:1, tag:"Fantastique", histoire:"L'enfant cite des noms qui n'apparaissent que dans des archives scellées. Il a disparu de l'hôpital sans laisser de trace.", fins:{succes:"Une organisation d'escrocs se servait de l'enfant comme leurre. Réseau démantelé.",echec:"L'enfant disparaît. Les meurtres évoqués reprennent."}},
];

const ALL_DETECTIVES = [
  { id:1, nom:"Éloi Vesper", age:35, action:2, reflexion:5, danger:1, salaire:100, corrompu:false, malade:false, traits:[
    {nom:"Perspicace", effet:"reflexion", bonus:5, tooltip:"+5% sur crimes de Réflexion", type:"positive"},
    {nom:"Fragile", effet:"danger_malus", malus:5, tooltip:"-5% sur crimes Dangereux", type:"negative"}
  ], bio:"Ancien archiviste reconverti. Lit les scènes de crime comme des textes anciens." },
  { id:2, nom:"Céleste Noir", age:29, action:4, reflexion:3, danger:2, salaire:110, corrompu:true, malade:false, traits:[
    {nom:"Redoutable", effet:"action", bonus:5, tooltip:"+5% sur crimes d'Action", type:"positive"},
    {nom:"Corrompue", effet:"corrupt", tooltip:"Prélève 20% des gains", type:"corrupt"}
  ], bio:"Ancienne policière renvoyée. Efficace, mais ses loyautés sont en vente." },
  { id:3, nom:"Auguste Flamel", age:52, action:3, reflexion:3, danger:3, salaire:130, corrompu:false, malade:false, traits:[
    {nom:"Équilibré", effet:"all", bonus:3, tooltip:"+3% sur tous les crimes", type:"positive"},
    {nom:"Expérimenté", effet:"rep_protect", tooltip:"Réduit les pertes de réputation de moitié", type:"positive"}
  ], bio:"Trente ans de terrain. Rien ne le surprend vraiment." },
  { id:4, nom:"Margot Sérane", age:26, action:5, reflexion:2, danger:2, salaire:90, corrompu:false, malade:false, traits:[
    {nom:"Impétueuse", effet:"action", bonus:5, tooltip:"+5% sur crimes d'Action", type:"positive"},
    {nom:"Rapide", effet:"speed", tooltip:"Narratif - agit vite", type:"neutral"}
  ], bio:"Ancienne championne d'athlétisme. S'ennuie vite, agit d'abord." },
  { id:5, nom:"Théodore Vane", age:44, action:1, reflexion:4, danger:4, salaire:120, corrompu:false, malade:false, traits:[
    {nom:"Téméraire", effet:"danger", bonus:5, tooltip:"+5% sur crimes Dangereux", type:"positive"},
    {nom:"Intuitif", effet:"intuition", tooltip:"Narratif - flair naturel", type:"neutral"}
  ], bio:"Passé trouble dans les milieux souterrains. Connaît tout le monde, rien ne l'effraie." },
  { id:6, nom:"Irma Duval", age:38, action:3, reflexion:4, danger:2, salaire:115, corrompu:false, malade:false, traits:[
    {nom:"Méthodique", effet:"reflexion", bonus:5, tooltip:"+5% sur crimes de Réflexion", type:"positive"},
    {nom:"Discrète", effet:"discretion", tooltip:"Narratif - passe inaperçue", type:"neutral"}
  ], bio:"Ancienne journaliste d'investigation. Pose les bonnes questions." },
  { id:7, nom:"Lucien Faux", age:31, action:4, reflexion:2, danger:3, salaire:95, corrompu:true, malade:false, traits:[
    {nom:"Efficace", effet:"action", bonus:5, tooltip:"+5% sur crimes d'Action", type:"positive"},
    {nom:"Corrompu", effet:"corrupt", tooltip:"Prélève 20% des gains", type:"corrupt"}
  ], bio:"Les résultats sont là. Mais il garde toujours quelque chose pour lui." },
  { id:8, nom:"Octave Brun", age:61, action:1, reflexion:5, danger:1, salaire:105, corrompu:false, malade:true, traits:[
    {nom:"Brillant", effet:"reflexion", bonus:5, tooltip:"+5% sur crimes de Réflexion", type:"positive"},
    {nom:"Fragile", effet:"injury_risk", tooltip:"Plus de risques de blessure", type:"negative"},
    {nom:"Malade", effet:"sick", tooltip:"-1 Action permanent", type:"sick"}
  ], bio:"Le meilleur analyste de la ville. Sa santé ne tient qu'à un fil." },
];

const ALL_BONUS = [
  { id:1, titre:"Dossier Complet", effet:"+25% de chance de succès", bonus:25, negatif:null },
  { id:2, titre:"Contact Police", effet:"Réduit le danger de 1 point", bonus:0, dangerMod:-1, negatif:null },
  { id:3, titre:"Témoin Inattendu", effet:"Effet aléatoire — peut aider ou nuire", bonus:0, aleatoire:true, negatif:"Peut réduire les chances de succès de 15%" },
  { id:4, titre:"Indic de Confiance", effet:"+20% succès sur crimes de réflexion", bonus:20, type:"reflexion", negatif:null },
  { id:5, titre:"Couverture Officielle", effet:"Annule les pertes de réputation en cas d'échec", bonus:0, protectRep:true, negatif:null },
  { id:6, titre:"Pression Médiatique", effet:"+30% succès, mais double la perte de réputation si échec", bonus:30, repMalus:2, negatif:"Double la perte de réputation en cas d'échec" },
  { id:7, titre:"Archive Occulte", effet:"+35% sur crimes fantastiques", bonus:35, type:"fantastique", negatif:null },
  { id:8, titre:"Filet de Sécurité", effet:"L'enquêteur ne peut pas être blessé", bonus:0, protectDet:true, negatif:null },
];
