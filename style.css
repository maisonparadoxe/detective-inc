:root {
  --bg:            #0a0a0a;
  --bg-raised:     #111111;
  --bg-card:       #141414;
  --bg-overlay:    rgba(10,10,10,0.92);
  --text-primary:  #e8e8e8;
  --text-secondary:#a0a0a0;
  --text-muted:    #686868;
  --border:        #2a2a2a;
  --border-active: #555555;
  --accent:        #c8b896;
  --accent-dim:    #6b5e3f;
  --danger:        #8b3a3a;
  --danger-dim:    #5a2525;
  --success:       #3a6b4a;
  --success-dim:   #2a4a35;
  --warn:          #7a6535;
  --warn-bright:   #c8a040;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent;}
html,body{height:100%;}
@media(min-width:601px){html,body{overflow:hidden;}}
body{background:var(--bg);color:var(--text-primary);font-family:'Inter',sans-serif;font-size:0.9rem;line-height:1.7;}
::-webkit-scrollbar{width:4px;height:4px;}
::-webkit-scrollbar-track{background:transparent;}
::-webkit-scrollbar-thumb{background:#2a2a2a;}

/* ── START SCREEN ── */
#start-screen{
  position:fixed;
  inset:0;
  background:var(--bg);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:32px;
  z-index:300;
  padding:24px;
}
#start-screen.hidden{display:none;}
.start-title{
  font-family:'Cormorant Garamond',serif;
  font-weight:300;
  font-size:4rem;
  letter-spacing:0.12em;
  color:var(--accent);
  text-align:center;
  line-height:1.2;
}
.start-subtitle{
  font-family:'IBM Plex Mono',monospace;
  font-size:0.75rem;
  letter-spacing:0.3em;
  text-transform:uppercase;
  color:var(--text-muted);
  text-align:center;
}
.start-desc{
  max-width:480px;
  text-align:center;
  color:var(--text-secondary);
  line-height:1.8;
  font-size:0.9rem;
}
.btn-start{
  font-family:'IBM Plex Mono',monospace;
  font-size:0.75rem;
  letter-spacing:0.25em;
  text-transform:uppercase;
  padding:16px 40px;
  background:transparent;
  cursor:pointer;
  transition:all 250ms ease;
  border:1px solid var(--accent-dim);
  color:var(--accent);
  margin-top:20px;
}
.btn-start:hover{
  background:rgba(200,184,150,0.1);
  border-color:var(--accent);
  transform:translateY(-2px);
}
@media(max-width:600px){
  .start-title{font-size:2.5rem;}
  .start-subtitle{font-size:0.65rem;}
  .start-desc{font-size:0.85rem;}
}

/* ── LAYOUT ── */
#game {
  display: grid;
  grid-template-rows: auto 1fr auto;
  grid-template-columns: 1fr;
  height: 100vh;
  max-width: 960px;
  margin: 0 auto;
  width: 100%;
}
@media(max-width:600px){#game{height:auto;min-height:100vh;}}
#topbar{border-bottom:1px solid var(--border);padding:12px 24px;display:flex;justify-content:space-between;align-items:center;background:var(--bg-raised);}
#main{overflow-y:auto;padding:24px;}
#bottombar{border-top:1px solid var(--border);padding:12px 24px;background:var(--bg-raised);display:flex;justify-content:space-between;align-items:center;gap:12px;}

/* ── TYPOGRAPHY ── */
.t-title{font-family:'Cormorant Garamond',serif;font-weight:300;letter-spacing:0.08em;}
.t-heading{font-family:'Cormorant Garamond',serif;font-weight:400;letter-spacing:0.04em;}
.t-label{font-family:'IBM Plex Mono',monospace;font-size:0.6rem;letter-spacing:0.25em;text-transform:uppercase;color:var(--text-muted);}
.t-mono{font-family:'IBM Plex Mono',monospace;font-size:0.72rem;letter-spacing:0.1em;}

/* ── TOPBAR ── */
.agency-name{font-family:'Cormorant Garamond',serif;font-weight:300;font-size:1.3rem;letter-spacing:0.1em;color:var(--accent);}
.stat-row{display:flex;gap:24px;align-items:center;}
.stat{display:flex;flex-direction:column;align-items:center;gap:2px;}
.stat-val{font-family:'IBM Plex Mono',monospace;font-size:0.85rem;color:var(--text-primary);}
.stat-val.danger{color:var(--danger);}
.stat-val.warn{color:var(--warn-bright);}
.stat-val.good{color:var(--accent);}
.day-badge{font-family:'IBM Plex Mono',monospace;font-size:0.65rem;letter-spacing:0.2em;color:var(--text-muted);border:1px solid var(--border);padding:4px 10px;}

/* ── CARDS ── */
.card{background:var(--bg-card);border:1px solid var(--border);padding:20px;animation:fadeUp 300ms ease backwards;}
.card+.card{margin-top:8px;}
@keyframes fadeUp{from{opacity:0;transform:translateY(5px);}to{opacity:1;transform:translateY(0);}}

/* ── CRIME CARD ── */
.crime-card{border:1px solid var(--border);background:var(--bg-card);padding:16px 20px;cursor:pointer;transition:border-color 180ms ease;position:relative;animation:fadeUp 300ms ease backwards;}
.crime-card:hover{border-color:var(--border-active);}
.crime-card.selected{border-color:var(--accent-dim);background:#181510;}
.crime-card.assigned{border-color:var(--success);opacity:0.6;cursor:default;}
.crime-card.ignored{opacity:0.3;cursor:default;}
.crime-header{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:8px;gap:12px;padding-right:90px;}
.crime-title{font-family:'Cormorant Garamond',serif;font-weight:400;font-size:1.05rem;letter-spacing:0.03em;flex:1;}
.crime-reward{font-family:'IBM Plex Mono',monospace;font-size:0.68rem;color:var(--accent);letter-spacing:0.1em;white-space:nowrap;}
.crime-desc{color:var(--text-secondary);font-size:0.82rem;line-height:1.65;margin-bottom:12px;}
.crime-stats{display:flex;gap:12px;}
.stat-pip{display:flex;align-items:center;gap:6px;}
.pip-label{font-family:'IBM Plex Mono',monospace;font-size:0.58rem;letter-spacing:0.15em;text-transform:uppercase;color:var(--text-muted);}
.pips{display:flex;gap:2px;}
.pip{width:8px;height:8px;border:1px solid var(--border);}
.pip.on.action{background:#c8b896;}
.pip.on.reflexion{background:#7a9ab5;}
.pip.on.danger{background:#8b3a3a;}
.crime-tag{position:absolute;top:12px;right:12px;font-family:'IBM Plex Mono',monospace;font-size:0.55rem;letter-spacing:0.15em;text-transform:uppercase;padding:2px 7px;border:1px solid var(--border);color:var(--text-muted);}
.crime-tag.fantastique{border-color:var(--accent-dim);color:var(--accent-dim);}
.assigned-label{font-family:'IBM Plex Mono',monospace;font-size:0.6rem;letter-spacing:0.15em;text-transform:uppercase;color:var(--success);margin-top:8px;}

/* ── DETECTIVE CARD ── */
.detective-card{border:1px solid var(--border);background:var(--bg-card);padding:14px 18px;cursor:pointer;transition:border-color 180ms ease;animation:fadeUp 300ms ease backwards;}
.detective-card:hover:not(.unavailable){border-color:var(--border-active);}
.detective-card.selected{border-color:var(--accent-dim);background:#181510;}
.detective-card.unavailable{opacity:0.35;cursor:not-allowed;}
.detective-card.corrupt{border-color:var(--danger-dim);}
.det-header{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:6px;}
.det-name{font-family:'Cormorant Garamond',serif;font-weight:400;font-size:1rem;}
.det-age{font-family:'IBM Plex Mono',monospace;font-size:0.6rem;color:var(--text-muted);}
.det-traits{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap;}
.trait{font-family:'IBM Plex Mono',monospace;font-size:0.55rem;letter-spacing:0.12em;text-transform:uppercase;padding:2px 7px;border:1px solid var(--border);color:var(--text-muted);position:relative;cursor:help;}
.trait.corrupt{border-color:var(--danger-dim);color:var(--danger);}
.trait.sick{border-color:var(--warn);color:var(--warn-bright);}
.trait.positive{border-color:var(--accent-dim);color:var(--accent-dim);}
.trait:hover{border-color:var(--border-active);}
.det-status{font-family:'IBM Plex Mono',monospace;font-size:0.58rem;color:var(--text-muted);margin-top:6px;}
.det-status.unavail{color:var(--danger);}
.salary-label{font-family:'IBM Plex Mono',monospace;font-size:0.6rem;color:var(--text-muted);}

/* Tooltip */
.trait[data-tooltip]:hover::after{
  content:attr(data-tooltip);
  position:absolute;
  bottom:calc(100% + 8px);
  left:0;
  background:var(--bg-raised);
  border:1px solid var(--border-active);
  padding:8px 12px;
  font-size:0.7rem;
  white-space:nowrap;
  z-index:1000;
  pointer-events:none;
  letter-spacing:0.05em;
  text-transform:none;
  color:var(--text-secondary);
  box-shadow:0 4px 12px rgba(0,0,0,0.4);
}
.trait[data-tooltip]:hover::before{
  content:'';
  position:absolute;
  bottom:calc(100% + 2px);
  left:12px;
  border:6px solid transparent;
  border-top-color:var(--border-active);
  z-index:1000;
  pointer-events:none;
}

/* ── BONUS CARDS ── */
.bonus-card{border:1px solid var(--border);background:var(--bg-card);padding:14px 18px;cursor:pointer;transition:border-color 180ms ease;animation:fadeUp 300ms ease backwards;}
.bonus-card:hover:not(.used){border-color:var(--accent-dim);}
.bonus-card.selected{border-color:var(--accent);background:#181510;}
.bonus-card.used{opacity:0.3;cursor:default;}
.bonus-title{font-family:'Cormorant Garamond',serif;font-weight:400;font-size:0.95rem;margin-bottom:4px;}
.bonus-effect{font-size:0.78rem;color:var(--text-secondary);}
.bonus-neg{font-size:0.72rem;color:var(--danger);margin-top:4px;font-style:italic;}

/* ── BUTTONS ── */
.btn{font-family:'IBM Plex Mono',monospace;font-size:0.68rem;letter-spacing:0.2em;text-transform:uppercase;padding:11px 20px;background:transparent;cursor:pointer;transition:border-color 180ms ease,color 180ms ease,background 180ms ease;border:1px solid var(--border-active);color:var(--text-secondary);}
.btn:hover{border-color:var(--accent-dim);color:var(--accent);}
.btn:disabled{opacity:0.3;cursor:not-allowed;}
.btn.primary{border-color:var(--border-active);color:var(--text-secondary);}
.btn.danger{border-color:var(--danger-dim);color:var(--text-muted);}
.btn.danger:hover{border-color:var(--danger);color:var(--danger);background:rgba(139,58,58,0.06);}
.btn.small{padding:7px 14px;font-size:0.6rem;}
.btn.assign-cta{
  border:2px solid var(--accent);
  color:var(--accent);
  background:rgba(200,184,150,0.08);
  font-size:0.72rem;
  padding:14px 28px;
  font-weight:500;
  box-shadow:0 0 20px rgba(200,184,150,0.15);
}
.btn.assign-cta:hover{
  background:rgba(200,184,150,0.15);
  box-shadow:0 0 30px rgba(200,184,150,0.25);
  transform:translateY(-1px);
}

/* ── SECTIONS ── */
.section-title{font-family:'Cormorant Garamond',serif;font-weight:300;font-size:1.6rem;letter-spacing:0.06em;margin-bottom:4px;}
.section-label{font-family:'IBM Plex Mono',monospace;font-size:0.6rem;letter-spacing:0.25em;text-transform:uppercase;color:var(--text-muted);margin-bottom:16px;}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:8px;}
.grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;}
.divider{border:none;border-top:1px solid var(--border);margin:20px 0;}

/* ── PHASE HEADER ── */
.phase-header{margin-bottom:24px;}
.phase-title{font-family:'Cormorant Garamond',serif;font-weight:300;font-size:2rem;letter-spacing:0.06em;margin-bottom:4px;}
.phase-sub{color:var(--text-secondary);font-size:0.85rem;}

/* ── LOG ── */
#log{max-height:120px;overflow-y:auto;display:flex;flex-direction:column;gap:4px;padding-right:4px;}
.log-entry{font-size:0.78rem;color:var(--text-secondary);padding:4px 0;border-bottom:1px solid var(--border);font-family:'IBM Plex Mono',monospace;font-size:0.62rem;letter-spacing:0.05em;}
.log-entry.success{color:var(--accent);}
.log-entry.failure{color:var(--danger);}
.log-entry.event{color:var(--warn-bright);}
.log-entry.system{color:var(--text-muted);}

/* ── OVERLAY ── */
#overlay{position:fixed;inset:0;background:var(--bg-overlay);display:none;align-items:center;justify-content:center;z-index:100;padding:24px;}
#overlay.active{display:flex;}
.modal{background:var(--bg-card);border:1px solid var(--border);padding:32px;max-width:480px;width:100%;max-height:80vh;overflow-y:auto;animation:fadeUp 300ms ease;}
.modal-title{font-family:'Cormorant Garamond',serif;font-weight:300;font-size:1.8rem;letter-spacing:0.06em;margin-bottom:8px;}
.modal-label{font-family:'IBM Plex Mono',monospace;font-size:0.6rem;letter-spacing:0.25em;text-transform:uppercase;color:var(--text-muted);margin-bottom:20px;}
.modal-body{color:var(--text-secondary);font-size:0.875rem;line-height:1.8;margin-bottom:20px;}
.modal-result{padding:16px;border:1px solid var(--border);margin-bottom:20px;}
.modal-result.success{border-color:var(--success);}
.modal-result.failure{border-color:var(--danger);}
.result-label{font-family:'IBM Plex Mono',monospace;font-size:0.58rem;letter-spacing:0.2em;text-transform:uppercase;margin-bottom:6px;}
.result-label.success{color:var(--accent);}
.result-label.failure{color:var(--danger);}
.result-text{font-size:0.875rem;color:var(--text-secondary);font-style:italic;}

/* ── HIRE MODAL ── */
.hire-option{border:1px solid var(--border);padding:14px 18px;cursor:pointer;margin-bottom:8px;transition:border-color 180ms;}
.hire-option:hover{border-color:var(--accent-dim);}
.hire-option.selected{border-color:var(--accent-dim);background:#181510;}

/* ── REP BAR ── */
.rep-bar{height:3px;background:var(--border);margin-top:4px;width:80px;}
.rep-fill{height:100%;background:var(--accent-dim);transition:width 400ms ease;}

/* ── GAME OVER ── */
#gameover{display:none;position:fixed;inset:0;background:var(--bg);z-index:200;align-items:center;justify-content:center;flex-direction:column;gap:24px;padding:40px;}
#gameover.active{display:flex;}
.go-title{font-family:'Cormorant Garamond',serif;font-weight:300;font-size:4rem;letter-spacing:0.1em;color:var(--text-muted);}
.go-sub{font-family:'IBM Plex Mono',monospace;font-size:0.68rem;letter-spacing:0.25em;text-transform:uppercase;color:var(--text-muted);}
.go-stats{border:1px solid var(--border);padding:24px;max-width:340px;width:100%;}

/* ── PHASE: RESULTS ── */
.result-row{display:flex;justify-content:space-between;align-items:baseline;padding:12px 0;border-bottom:1px solid var(--border);}
.result-crime{font-family:'Cormorant Garamond',serif;font-size:0.95rem;}
.result-outcome{font-family:'IBM Plex Mono',monospace;font-size:0.6rem;letter-spacing:0.15em;text-transform:uppercase;}
.result-outcome.s{color:var(--accent);}
.result-outcome.f{color:var(--danger);}
.result-outcome.i{color:var(--text-muted);}
.result-money{font-family:'IBM Plex Mono',monospace;font-size:0.72rem;}
.result-money.pos{color:var(--accent);}
.result-money.neg{color:var(--danger);}

/* ── EVENT BANNER ── */
.event-banner{border:1px solid var(--warn);background:rgba(122,101,53,0.08);padding:14px 18px;margin-bottom:20px;}
.event-title{font-family:'Cormorant Garamond',serif;font-size:1.05rem;color:var(--warn-bright);margin-bottom:4px;}
.event-desc{font-size:0.82rem;color:var(--text-secondary);}

/* ── SCROLL ── */
#main{scrollbar-width:thin;scrollbar-color:#2a2a2a transparent;}

/* ── RESPONSIVE ── */
/* Tablette (< 768px) */
@media(max-width:768px){
  #game{max-width:100%;}
  .grid-2{grid-template-columns:1fr 1fr;}
  .grid-3{grid-template-columns:1fr 1fr;}
  #topbar{padding:10px 16px;}
  #main{padding:16px;}
  #bottombar{padding:10px 16px;}
}

/* Mobile (< 600px) — refonte complète */
@media(max-width:600px){
  /* Scroll natif — pas de layout fixe */
  html,body{height:auto;overflow:auto;}
  #game{
    display:grid;
    grid-template-rows: auto 1fr auto;
    height:auto;
    min-height:100vh;
  }
  #main{
    overflow:visible;
    padding:14px;
    flex:1;
  }

  /* Topbar — nom + stats empilés */
  #topbar{
    flex-direction:column;
    align-items:flex-start;
    gap:10px;
    padding:12px 14px;
  }
  .agency-name{font-size:1.1rem;}
  .stat-row{
    width:100%;
    display:grid;
    grid-template-columns:1fr 1fr 1fr auto;
    gap:0;
    border:1px solid var(--border);
  }
  .stat{
    padding:8px 10px;
    border-right:1px solid var(--border);
    align-items:flex-start;
  }
  .stat:last-child{border-right:none;}
  .stat-val{font-size:0.8rem;}
  .day-badge{
    padding:8px 10px;
    border:none;
    align-self:center;
    font-size:0.58rem;
  }
  .rep-bar{width:48px;}

  /* Bottombar — log caché, boutons pleine largeur */
  #bottombar{
    flex-direction:column-reverse;
    align-items:stretch;
    gap:8px;
    padding:12px 14px;
    position:sticky;
    bottom:0;
    z-index:10;
    background:var(--bg-raised);
  }
  #log{
    max-height:60px;
    font-size:0.6rem;
    border-top:1px solid var(--border);
    padding-top:8px;
    flex:unset;
  }
  #bottombar > div:last-child{
    display:grid;
    grid-template-columns:1fr 1fr 2fr;
    gap:6px;
    width:100%;
  }
  #bottombar .btn{
    width:100%;
    max-width:none;
    padding:12px 8px;
    font-size:0.58rem;
    letter-spacing:0.12em;
    text-align:center;
  }

  /* Grilles */
  .grid-2,.grid-3{grid-template-columns:1fr;}

  /* Cards — padding réduit */
  .card{padding:14px;}
  .crime-card,.detective-card,.bonus-card,.hire-option{padding:12px 14px;}

  /* Phase header */
  .phase-title{font-size:1.5rem;}
  .phase-sub{font-size:0.8rem;}

  /* Crime stats — plus compact */
  .crime-stats{flex-wrap:wrap;gap:8px;}
  .pip{width:7px;height:7px;}
  
  /* Crime header — ajuster pour mobile */
  .crime-header{flex-direction:column;align-items:flex-start;gap:6px;padding-right:80px;}
  .crime-reward{margin-top:2px;}

  /* Modal */
  #overlay{padding:12px;}
  .modal{padding:20px;max-height:90vh;}
  .modal-title{font-size:1.4rem;}

  /* Section label */
  .section-label{font-size:0.55rem;}

  /* Buttons */
  .btn{font-size:0.62rem;padding:10px 16px;}
  .btn.small{padding:9px 12px;font-size:0.58rem;}

  /* Result rows */
  .result-row{flex-wrap:wrap;gap:4px;}
  .result-crime{font-size:0.85rem;}
  .result-outcome,.result-money{font-size:0.58rem;}

  /* Det card traits */
  .det-traits{gap:4px;}
  .trait{font-size:0.5rem;padding:2px 5px;}

  /* Event banner */
  .event-banner{padding:12px 14px;}
  .event-title{font-size:0.95rem;}
}

/* Très petits écrans (< 380px) */
@media(max-width:380px){
  .agency-name{font-size:1rem;}
  .stat-val{font-size:0.72rem;}
  #bottombar > div:last-child{
    grid-template-columns:1fr 1fr;
    grid-template-rows:auto auto;
  }
  #btn-action{
    grid-column:1/-1;
  }
  .phase-title{font-size:1.3rem;}
  .crime-title{font-size:0.95rem;}
  .det-name{font-size:0.9rem;}
}
